<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Video Platform</title>
    <style>
        :root {
            --primary: #0095f6;
            --danger: #ff4444;
            --vip: #ff2d55;
            --desi: #4CAF50;
            --vdeshi: #9C27B0;
            --text-light: #fff;
            --bg-dark: #0f0f0f;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: var(--bg-dark);
            color: var(--text-light);
        }
        
        .nav-tabs {
            display: flex;
            justify-content: center;
            background: rgba(0,0,0,0.5);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-tab {
            padding: 15px 25px;
            cursor: pointer;
            font-weight: 600;
            border-bottom: 3px solid transparent;
        }
        
        .nav-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .content-section {
            display: none;
            padding: 20px;
        }
        
        .content-section.active {
            display: block;
        }
        
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .video-card {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s;
        }
        
        .video-card:hover {
            transform: translateY(-5px);
        }
        
        .video-thumbnail {
            width: 100%;
            height: 200px;
            object-fit: cover;
            cursor: pointer;
        }
        
        video {
            width: 100%;
            display: none;
            background: #000;
        }
        
        .timer-display {
            position: fixed;
            top: 60px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 99;
        }
        
        .payment-overlay, .ad-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .payment-box {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
        
        .payment-amount {
            font-size: 2rem;
            font-weight: bold;
            margin: 15px 0;
            color: var(--vip);
        }
        
        .ad-button {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 20px;
            border-radius: 20px;
            background: #000;
            color: white;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="nav-tabs">
        <div class="nav-tab active" onclick="showSection('vip')">VIP</div>
        <div class="nav-tab" onclick="showSection('desi')">DESI</div>
        <div class="nav-tab" onclick="showSection('vdeshi')">VDESHI</div>
    </div>

    <div id="vip-section" class="content-section active">
        <div class="video-grid" id="vip-videos"></div>
    </div>

    <div id="desi-section" class="content-section">
        <div class="video-grid" id="desi-videos"></div>
        <div class="timer-display" id="desiTimer">01:00</div>
    </div>

    <div id="vdeshi-section" class="content-section">
        <div class="video-grid" id="vdeshi-videos"></div>
        <div class="timer-display" id="vdeshiTimer">01:00</div>
    </div>

    <div class="payment-overlay" id="paymentOverlay">
        <div class="payment-box">
            <h2>Unlock Full Video</h2>
            <div class="payment-amount">â‚¹99</div>
            <p>Pay via UPI to continue watching</p>
        </div>
    </div>

    <div class="ad-modal" id="adModal">
        <video class="ad-video" id="adVideo" controls></video>
        <button class="ad-button" id="adButton">Visit Website</button>
    </div>

    <script>
        // App State
        let currentVideoId = null;
        let currentSection = 'vip';
        let desiTime = 60;
        let vdeshiTime = 60;
        let currentAd = null;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadVideos();
            setInterval(updateTimers, 1000);
        });
        
        // Load videos from localStorage
        function loadVideos() {
            ['vip', 'desi', 'vdeshi'].forEach(section => {
                const videos = JSON.parse(localStorage.getItem(`${section}Videos`)) || [];
                const container = document.getElementById(`${section}-videos`);
                
                container.innerHTML = videos.map(video => `
                    <div class="video-card">
                        <img src="${video.thumbnail}" class="video-thumbnail" 
                             onclick="playVideo('${section}', '${video.id}')">
                        <video id="${section}-${video.id}" src="${video.url}" controls></video>
                    </div>
                `).join('');
            });
        }
        
        // Play video with section-specific rules
        function playVideo(section, id) {
            const video = document.getElementById(`${section}-${id}`);
            
            if (section === 'vip') {
                video.play();
                setTimeout(() => {
                    video.pause();
                    document.getElementById('paymentOverlay').style.display = 'flex';
                }, 5000);
            } 
            else if (section === 'desi' || section === 'vdeshi') {
                const timer = section === 'desi' ? desiTime : vdeshiTime;
                if (timer <= 0) {
                    showAd();
                    return;
                }
                video.play();
            }
        }
        
        // Show ad
        function showAd() {
            const ads = JSON.parse(localStorage.getItem('ads')) || [];
            if (ads.length === 0) return;
            
            currentAd = ads[Math.floor(Math.random() * ads.length)];
            const adVideo = document.getElementById('adVideo');
            const adButton = document.getElementById('adButton');
            
            adVideo.src = currentAd.url;
            adButton.textContent = currentAd.buttonText || 'Visit Site';
            adButton.style.background = currentAd.buttonColor || '#0095f6';
            adButton.onclick = () => window.open(currentAd.buttonLink, '_blank');
            
            document.getElementById('adModal').style.display = 'flex';
            adVideo.play();
        }
        
        // Update timers
        function updateTimers() {
            if (currentSection === 'desi' && desiTime > 0) {
                desiTime--;
                updateTimerDisplay('desiTimer', desiTime);
            }
            if (currentSection === 'vdeshi' && vdeshiTime > 0) {
                vdeshiTime--;
                updateTimerDisplay('vdeshiTimer', vdeshiTime);
            }
        }
        
        function updateTimerDisplay(elementId, seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            document.getElementById(elementId).textContent = 
                `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        
        // Switch sections
        function showSection(section) {
            currentSection = section;
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            document.querySelectorAll('.content-section').forEach(sec => {
                sec.classList.remove('active');
            });
            document.getElementById(`${section}-section`).classList.add('active');
        }
        
        // Listen for changes from admin
        window.addEventListener('storage', () => {
            loadVideos();
        });
    </script>
</body>
</html>
